/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();const t=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,h=a?e[t+2]:0,c=r>>2,l=(3&r)<<4|o>>4;let u=(15&o)<<2|h>>6,d=63&h;a||(d=64,s||(u=64)),i.push(n[c],n[l],n[u],n[d])}return i.join("")},encodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(e):this.encodeByteArray(t(e),n)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],o=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const h=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==o||null==a||null==h)throw new i;const c=s<<2|o>>4;if(r.push(c),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==h){const e=a<<6&192|h;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const r=function(e){return function(e){const i=t(e);return n.encodeByteArray(i,!0)}(e).replace(/\./g,"")},s=function(e){try{return n.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},o=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e.g)return e.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&s(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},a=e=>{var t,n;return null===(n=null===(t=o())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},h=()=>{var e;return null===(e=o())||void 0===e?void 0:e.config},c=e=>{var t;return null===(t=o())||void 0===t?void 0:t[`_${e}`]};class l{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function u(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function f(){try{return"object"==typeof indexedDB}catch(e){return!1}}function p(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class g extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,g.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,m.prototype.create)}}class m{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(v,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new g(i,o,n)}}const v=/\{\$([^}]+)}/g;function y(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(w(n)&&w(s)){if(!y(n,s))return!1}else if(n!==s)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function w(e){return null!==e&&"object"==typeof e}function b(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function I(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function _(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class T{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=E),void 0===i.error&&(i.error=E),void 0===i.complete&&(i.complete=E);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function E(){}const k=1e3,S=2,A=144e5,C=.5;function R(e,t=k,n=S){const i=t*Math.pow(n,e),r=Math.round(C*i*(Math.random()-.5)*2);return Math.min(A,i+r)}function O(e){return e&&e._delegate?e._delegate:e}class N{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const D="[DEFAULT]";class P{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new l;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:D})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=D){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=D){return this.instances.has(e)}getOptions(e=D){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===D?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e=D){return this.component?this.component.multipleInstances?e:D:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class L{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new P(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const M=[];var U,x;(x=U||(U={}))[x.DEBUG=0]="DEBUG",x[x.VERBOSE=1]="VERBOSE",x[x.INFO=2]="INFO",x[x.WARN=3]="WARN",x[x.ERROR=4]="ERROR",x[x.SILENT=5]="SILENT";const j={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},F=U.INFO,B={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},H=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=B[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class V{constructor(e){this.name=e,this._logLevel=F,this._logHandler=H,this._userLogHandler=null,M.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in U))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?j[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...e),this._logHandler(this,U.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...e),this._logHandler(this,U.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,U.INFO,...e),this._logHandler(this,U.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,U.WARN,...e),this._logHandler(this,U.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...e),this._logHandler(this,U.ERROR,...e)}}const $=(e,t)=>t.some((t=>e instanceof t));let z,K;const q=new WeakMap,W=new WeakMap,G=new WeakMap,J=new WeakMap,X=new WeakMap;let Y={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return W.get(e);if("objectStoreNames"===t)return e.objectStoreNames||G.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Z(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Q(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(K||(K=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(ee(this),e),Z(q.get(this))}:function(...e){return Z(t.apply(ee(this),e))}:function(e,...n){const i=t.call(ee(this),e,...n);return G.set(i,e.sort?e.sort():[e]),Z(i)}:(e instanceof IDBTransaction&&function(e){if(W.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));W.set(e,t)}(e),$(e,z||(z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Y):e);var t}function Z(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(Z(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&q.set(t,e)})).catch((()=>{})),X.set(t,e),t}(e);if(J.has(e))return J.get(e);const t=Q(e);return t!==e&&(J.set(e,t),X.set(t,e)),t}const ee=e=>X.get(e);function te(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=Z(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(Z(o.result),e.oldVersion,e.newVersion,Z(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}const ne=["get","getKey","getAll","getAllKeys","count"],ie=["put","add","delete","clear"],re=new Map;function se(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(re.get(t))return re.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=ie.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!ne.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&s.done]))[0]};return re.set(t,s),s}var oe;oe=Y,Y={...oe,get:(e,t,n)=>se(e,t)||oe.get(e,t,n),has:(e,t)=>!!se(e,t)||oe.has(e,t)};class ae{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const he="@firebase/app",ce="0.9.4",le=new V("@firebase/app"),ue="[DEFAULT]",de={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fe=new Map,pe=new Map;function ge(e,t){try{e.container.addComponent(t)}catch(n){le.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function me(e){const t=e.name;if(pe.has(t))return le.debug(`There were multiple attempts to register component ${t}.`),!1;pe.set(t,e);for(const t of fe.values())ge(t,e);return!0}function ve(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ye=new m("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class we{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new N("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ye.create("app-deleted",{appName:this._name})}}const be="9.17.2";function Ie(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:ue,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw ye.create("bad-app-name",{appName:String(r)});if(n||(n=h()),!n)throw ye.create("no-options");const s=fe.get(r);if(s){if(y(n,s.options)&&y(i,s.config))return s;throw ye.create("duplicate-app",{appName:r})}const o=new L(r);for(const e of pe.values())o.addComponent(e);const a=new we(n,i,o);return fe.set(r,a),a}function _e(e=ue){const t=fe.get(e);if(!t&&e===ue)return Ie();if(!t)throw ye.create("no-app",{appName:e});return t}function Te(e,t,n){var i;let r=null!==(i=de[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void le.warn(e.join(" "))}me(new N(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const Ee="firebase-heartbeat-database",ke=1,Se="firebase-heartbeat-store";let Ae=null;function Ce(){return Ae||(Ae=te(Ee,ke,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Se)}}).catch((e=>{throw ye.create("idb-open",{originalErrorMessage:e.message})}))),Ae}async function Re(e,t){try{const n=(await Ce()).transaction(Se,"readwrite"),i=n.objectStore(Se);return await i.put(t,Oe(e)),n.done}catch(e){if(e instanceof g)le.warn(e.message);else{const t=ye.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});le.warn(t.message)}}}function Oe(e){return`${e.name}!${e.options.appId}`}class Ne{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Pe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=De();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=De(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Le(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Le(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=r(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function De(){return(new Date).toISOString().substring(0,10)}class Pe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!f()&&p().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{return(await Ce()).transaction(Se).objectStore(Se).get(Oe(e))}catch(e){if(e instanceof g)le.warn(e.message);else{const t=ye.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});le.warn(t.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Le(e){return r(JSON.stringify({version:2,heartbeats:e})).length}me(new N("platform-logger",(e=>new ae(e)),"PRIVATE")),me(new N("heartbeat",(e=>new Ne(e)),"PRIVATE")),Te(he,ce,""),Te(he,ce,"esm2017"),Te("fire-js",""),Te("firebase","9.17.2","app");const Me="@firebase/installations",Ue="0.6.4",xe=1e4,je=`w:${Ue}`,Fe="FIS_v2",Be="https://firebaseinstallations.googleapis.com/v1",He=36e5,Ve=new m("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $e(e){return e instanceof g&&e.code.includes("request-failed")}function ze({projectId:e}){return`${Be}/projects/${e}/installations`}function Ke(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function qe(e,t){const n=(await t.json()).error;return Ve.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function We({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function Ge(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Je(e){return new Promise((t=>{setTimeout(t,e)}))}const Xe=/^[cdef][\w-]{21}$/,Ye="";function Qe(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){var t;return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(e);return Xe.test(t)?t:Ye}catch(e){return Ye}}function Ze(e){return`${e.appName}!${e.appId}`}const et=new Map;function tt(e,t){const n=Ze(e);nt(n,t),function(e,t){const n=(!it&&"BroadcastChannel"in self&&(it=new BroadcastChannel("[Firebase] FID Change"),it.onmessage=e=>{nt(e.data.key,e.data.fid)}),it);n&&n.postMessage({key:e,fid:t}),0===et.size&&it&&(it.close(),it=null)}(n,t)}function nt(e,t){const n=et.get(e);if(n)for(const e of n)e(t)}let it=null;const rt="firebase-installations-database",st=1,ot="firebase-installations-store";let at=null;function ht(){return at||(at=te(rt,st,{upgrade:(e,t)=>{0===t&&e.createObjectStore(ot)}})),at}async function ct(e,t){const n=Ze(e),i=(await ht()).transaction(ot,"readwrite"),r=i.objectStore(ot),s=await r.get(n);return await r.put(t,n),await i.done,s&&s.fid===t.fid||tt(e,t.fid),t}async function lt(e){const t=Ze(e),n=(await ht()).transaction(ot,"readwrite");await n.objectStore(ot).delete(t),await n.done}async function ut(e,t){const n=Ze(e),i=(await ht()).transaction(ot,"readwrite"),r=i.objectStore(ot),s=await r.get(n),o=t(s);return void 0===o?await r.delete(n):await r.put(o,n),await i.done,!o||s&&s.fid===o.fid||tt(e,o.fid),o}async function dt(e){let t;const n=await ut(e.appConfig,(n=>{const i=function(e){return gt(e||{fid:Qe(),registrationStatus:0})}(n),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Ve.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=ze(e),r=We(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const o={fid:n,authVersion:Fe,appId:e.appId,sdkVersion:je},a={method:"POST",headers:r,body:JSON.stringify(o)},h=await Ge((()=>fetch(i,a)));if(h.ok){const e=await h.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Ke(e.authToken)}}throw await qe("Create Installation",h)}(e,t);return ct(e.appConfig,n)}catch(n){throw $e(n)&&409===n.customData.serverCode?await lt(e.appConfig):await ct(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ft(e)}:{installationEntry:t}}(e,i);return t=r.registrationPromise,r.installationEntry}));return n.fid===Ye?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function ft(e){let t=await pt(e.appConfig);for(;1===t.registrationStatus;)await Je(100),t=await pt(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await dt(e);return n||t}return t}function pt(e){return ut(e,(e=>{if(!e)throw Ve.create("installation-not-found");return gt(e)}))}function gt(e){return 1===(t=e).registrationStatus&&t.registrationTime+xe<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function mt({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${ze(e)}/${t}/authTokens:generate`}(e,n),r=function(e,{refreshToken:t}){const n=We(e);return n.append("Authorization",function(e){return`${Fe} ${e}`}(t)),n}(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const o={installation:{sdkVersion:je,appId:e.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},h=await Ge((()=>fetch(i,a)));if(h.ok)return Ke(await h.json());throw await qe("Generate Auth Token",h)}async function vt(e,t=!1){let n;const i=await ut(e.appConfig,(i=>{if(!wt(i))throw Ve.create("not-registered");const r=i.authToken;if(!t&&(2===(s=r).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+He}(s)))return i;var s;if(1===r.requestStatus)return n=async function(e,t){let n=await yt(e.appConfig);for(;1===n.authToken.requestStatus;)await Je(100),n=await yt(e.appConfig);const i=n.authToken;return 0===i.requestStatus?vt(e,t):i}(e,t),i;{if(!navigator.onLine)throw Ve.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await mt(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await ct(e.appConfig,i),n}catch(n){if(!$e(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await ct(e.appConfig,n)}else await lt(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function yt(e){return ut(e,(e=>{if(!wt(e))throw Ve.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+xe<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function wt(e){return void 0!==e&&2===e.registrationStatus}function bt(e){return Ve.create("missing-app-config-values",{valueName:e})}const It="installations";me(new N(It,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw bt("App Configuration");if(!e.name)throw bt("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw bt(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:ve(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),me(new N("installations-internal",(e=>{const t=ve(e.getProvider("app").getImmediate(),It).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await dt(t);return i?i.catch(console.error):vt(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await dt(e);t&&await t}(n),(await vt(n,t)).token}(t,e)}}),"PRIVATE")),Te(Me,Ue),Te(Me,Ue,"esm2017");const _t="analytics",Tt="firebase_id",Et="origin",kt=6e4,St="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",At="https://www.googletagmanager.com/gtag/js",Ct=new V("@firebase/analytics");function Rt(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const Ot=new m("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Nt=30,Dt=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Pt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Lt(e,t=Dt,n){const{appId:i,apiKey:r,measurementId:s}=e.options;if(!i)throw Ot.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw Ot.create("no-api-key")}const o=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Ut;return setTimeout((async()=>{a.abort()}),void 0!==n?n:kt),Mt({appId:i,apiKey:r,measurementId:s},o,a,t)}async function Mt(e,{throttleEndTimeMillis:t,backoffCount:n},i,r=Dt){var s;const{appId:o,measurementId:a}=e;try{await function(e,t){return new Promise(((n,i)=>{const r=Math.max(t-Date.now(),0),s=setTimeout(n,r);e.addEventListener((()=>{clearTimeout(s),i(Ot.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(i,t)}catch(e){if(a)return Ct.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:o,measurementId:a};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,r={method:"GET",headers:Pt(i)},s=St.replace("{app-id}",n),o=await fetch(s,r);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw Ot.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return r.deleteThrottleMetadata(o),t}catch(t){const h=t;if(!function(e){if(!(e instanceof g&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(h)){if(r.deleteThrottleMetadata(o),a)return Ct.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==h?void 0:h.message}]`),{appId:o,measurementId:a};throw t}const c=503===Number(null===(s=null==h?void 0:h.customData)||void 0===s?void 0:s.httpStatus)?R(n,r.intervalMillis,Nt):R(n,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return r.setThrottleMetadata(o,l),Ct.debug(`Calling attemptFetch again in ${c} millis`),Mt(e,l,i,r)}}class Ut{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let xt,jt;async function Ft(e,t,n,i,r,s,o){var a;const h=Lt(e);h.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Ct.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Ct.error(e))),t.push(h);const c=async function(){if(!f())return Ct.warn(Ot.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await p()}catch(e){return Ct.warn(Ot.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[l,u]=await Promise.all([h,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(At)&&n.src.includes(e))return n;return null})(s)||function(e,t){const n=document.createElement("script");n.src=`${At}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}(s,l.measurementId),jt&&(r("consent","default",jt),jt=void 0),r("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d[Et]="firebase",d.update=!0,null!=u&&(d[Tt]=u),r("config",l.measurementId,d),xt&&(r("set",xt),xt=void 0),l.measurementId}class Bt{constructor(e){this.app=e}_delete(){return delete Ht[this.app.options.appId],Promise.resolve()}}let Ht={},Vt=[];const $t={};let zt,Kt,qt="dataLayer",Wt="gtag",Gt=!1;function Jt(e,t,n){!function(){const e=[];if(d()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Ot.create("invalid-analytics-context",{errorInfo:t});Ct.warn(n.message)}}();const i=e.options.appId;if(!i)throw Ot.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Ot.create("no-api-key");Ct.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ht[i])throw Ot.create("already-exists",{id:i});if(!Gt){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(qt);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,r){let s=function(...e){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function(e,t,n,i){return async function(r,s,o){try{"event"===r?await async function(e,t,n,i,r){try{let s=[];if(r&&r.send_to){let e=r.send_to;Array.isArray(e)||(e=[e]);const i=await Rt(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),r=e&&t[e.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",i,r||{})}catch(e){Ct.error(e)}}(e,t,n,s,o):"config"===r?await async function(e,t,n,i,r,s){const o=i[r];try{if(o)await t[o];else{const e=(await Rt(n)).find((e=>e.measurementId===r));e&&await t[e.appId]}}catch(e){Ct.error(e)}e("config",r,s)}(e,t,n,i,s,o):"consent"===r?e("consent","update",o):e("set",s)}catch(e){Ct.error(e)}}}(s,e,t,n),{gtagCore:s,wrappedGtag:window[r]}}(Ht,Vt,$t,qt,Wt);Kt=e,zt=t,Gt=!0}return Ht[i]=Ft(e,Vt,$t,t,zt,qt,n),new Bt(e)}const Xt="@firebase/analytics",Yt="0.9.4";function Qt(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}me(new N(_t,((e,{options:t})=>Jt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),me(new N("analytics-internal",(function(e){try{const t=e.getProvider(_t).getImmediate();return{logEvent:(e,n,i)=>function(e,t,n,i){e=O(e),async function(e,t,n,i,r){if(r&&r.global)e("event",n,i);else{const r=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(Kt,Ht[e.app.options.appId],t,n,i).catch((e=>Ct.error(e)))}(t,e,n,i)}}catch(e){throw Ot.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Te(Xt,Yt),Te(Xt,Yt,"esm2017"),Object.create,Object.create;const Zt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},en=new m("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tn=new V("@firebase/auth");function nn(e,...t){tn.logLevel<=U.ERROR&&tn.error(`Auth (${be}): ${e}`,...t)}function rn(e,...t){throw on(e,...t)}function sn(e,...t){return on(e,...t)}function on(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return en.create(e,...t)}function an(e,t,...n){if(!e)throw on(t,...n)}function hn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw nn(t),new Error(t)}function cn(e,t){e||hn(t)}const ln=new Map;function un(e){cn(e instanceof Function,"Expected a class definition");let t=ln.get(e);return t?(cn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ln.set(e,t),t)}function dn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function fn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class pn{constructor(e,t){this.shortDelay=e,this.longDelay=t,cn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===fn()||"https:"===fn()||d()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function gn(e,t){cn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class mn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},yn=new pn(3e4,6e4);function wn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function bn(e,t,n,i,r={}){return In(e,r,(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=b(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),mn.fetch()(Tn(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))}))}async function In(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},vn),t);try{const t=new En(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw kn(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw kn(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw kn(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw kn(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(e,t,n){const i=Object.assign(Object.assign({},Zt()),{[t]:n});return new m("auth","Firebase",i).create(t,{appName:e.name})}(e,a,o);rn(e,a)}}catch(t){if(t instanceof g)throw t;rn(e,"internal-error",{message:String(t)})}}async function _n(e,t,n,i,r={}){const s=await bn(e,t,n,i,r);return"mfaPendingCredential"in s&&rn(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Tn(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?gn(e.config,r):`${e.config.apiScheme}://${r}`}class En{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(sn(this.auth,"network-request-failed"))),yn.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function kn(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=sn(e,t,i);return r.customData._tokenResponse=n,r}function Sn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function An(e){return 1e3*Number(e)}function Cn(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return nn("JWT malformed, contained fewer than 3 sections"),null;try{const e=s(n);return e?JSON.parse(e):(nn("Failed to decode base64 JWT payload"),null)}catch(e){return nn("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function Rn(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof g&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class On{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Nn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sn(this.lastLoginAt),this.creationTime=Sn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Dn(e){var t;const n=e.auth,i=await e.getIdToken(),r=await Rn(e,async function(e,t){return bn(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));an(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Qt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(h=e.providerData,c=o,[...h.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var h,c;const l=e.isAnonymous,u=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!l&&u,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Nn(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Pn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){an(e.idToken,"internal-error"),an(void 0!==e.idToken,"internal-error"),an(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Cn(e);return an(t,"internal-error"),an(void 0!==t.exp,"internal-error"),an(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return an(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await In(e,{},(async()=>{const n=b({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=Tn(e,i,"/v1/token",`key=${r}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",mn.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new Pn;return n&&(an("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(an("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(an("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pn,this.toJSON())}_performRefresh(){return hn("not implemented")}}function Ln(e,t){an("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Mn{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=Qt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new On(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Nn(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Rn(this,this.stsTokenManager.getToken(this.auth,e));return an(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=O(e),i=await n.getIdToken(t),r=Cn(i);an(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Sn(An(r.auth_time)),issuedAtTime:Sn(An(r.iat)),expirationTime:Sn(An(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=O(e);await Dn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(an(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Mn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){an(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Dn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Rn(this,async function(e,t){return bn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,h,c;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(h=t.createdAt)&&void 0!==h?h:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:I,stsTokenManager:_}=t;an(y&&_,e,"internal-error");const T=Pn.fromJSON(this.name,_);an("string"==typeof y,e,"internal-error"),Ln(l,e.name),Ln(u,e.name),an("boolean"==typeof w,e,"internal-error"),an("boolean"==typeof b,e,"internal-error"),Ln(d,e.name),Ln(f,e.name),Ln(p,e.name),Ln(g,e.name),Ln(m,e.name),Ln(v,e.name);const E=new Mn({uid:y,auth:e,email:u,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:m,lastLoginAt:v});return I&&Array.isArray(I)&&(E.providerData=I.map((e=>Object.assign({},e)))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t,n=!1){const i=new Pn;i.updateFromServerResponse(t);const r=new Mn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Dn(r),r}}class Un{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Un.type="NONE";const xn=Un;function jn(e,t,n){return`firebase:${e}:${t}:${n}`}class Fn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=jn(this.userKey,i.apiKey,r),this.fullPersistenceKey=jn("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Fn(un(xn),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||un(xn);const s=jn(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const i=Mn._fromJSON(e,t);n!==r&&(o=i),r=n;break}}catch(e){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(e){}}))),new Fn(r,e,n)):new Fn(r,e,n)}}function Bn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(zn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Hn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qn(t))return"Blackberry";if(Wn(t))return"Webos";if(Vn(t))return"Safari";if((t.includes("chrome/")||$n(t))&&!t.includes("edge/"))return"Chrome";if(Kn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Hn(e=u()){return/firefox\//i.test(e)}function Vn(e=u()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $n(e=u()){return/crios\//i.test(e)}function zn(e=u()){return/iemobile/i.test(e)}function Kn(e=u()){return/android/i.test(e)}function qn(e=u()){return/blackberry/i.test(e)}function Wn(e=u()){return/webos/i.test(e)}function Gn(e=u()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Jn(e=u()){return Gn(e)||Kn(e)||Wn(e)||qn(e)||/windows phone/i.test(e)||zn(e)}function Xn(e,t=[]){let n;switch(e){case"Browser":n=Bn(u());break;case"Worker":n=`${Bn(u())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${be}/${i}`}class Yn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(e){i(e)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class Qn{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ei(this),this.idTokenSubscription=new ei(this),this.beforeStateQueue=new Yn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=en,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=un(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Fn.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return an(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dn(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?O(e):null;return t&&an(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&an(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(un(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new m("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&un(e)||this._popupRedirectResolver;an(t,this,"argument-error"),this.redirectPersistenceManager=await Fn.create(this,[un(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return an(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"==typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return an(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function Zn(e){return O(e)}class ei{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new T(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return an(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ti(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ni(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ii{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hn("not implemented")}_getIdTokenResponse(e){return hn("not implemented")}_linkToIdToken(e,t){return hn("not implemented")}_getReauthenticationResolver(e){return hn("not implemented")}}class ri extends ii{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ri(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new ri(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return _n(e,"POST","/v1/accounts:signInWithPassword",wn(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return _n(e,"POST","/v1/accounts:signInWithEmailLink",wn(e,t))}(e,{email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return async function(e,t){return bn(e,"POST","/v1/accounts:update",t)}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return _n(e,"POST","/v1/accounts:signInWithEmailLink",wn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function si(e,t){return _n(e,"POST","/v1/accounts:signInWithIdp",wn(e,t))}class oi extends ii{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=Qt(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new oi(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return si(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,si(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,si(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=b(t)}return e}}const ai={USER_NOT_FOUND:"user-not-found"};class hi extends ii{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new hi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new hi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return _n(e,"POST","/v1/accounts:signInWithPhoneNumber",wn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await _n(e,"POST","/v1/accounts:signInWithPhoneNumber",wn(e,t));if(n.temporaryProof)throw kn(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return _n(e,"POST","/v1/accounts:signInWithPhoneNumber",wn(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ai)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new hi({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class ci{constructor(e){var t,n,i,r,s,o;const a=I(_(e)),h=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);an(h&&c&&l,"argument-error"),this.apiKey=h,this.operation=l,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=I(_(e)).link,n=t?I(_(t)).deep_link_id:null,i=I(_(e)).deep_link_id;return(i?I(_(i)).link:null)||i||n||t||e}(e);try{return new ci(t)}catch(e){return null}}}class li{constructor(){this.providerId=li.PROVIDER_ID}static credential(e,t){return ri._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ci.parseLink(t);return an(n,"argument-error"),ri._fromEmailAndCode(e,n.code,n.tenantId)}}li.PROVIDER_ID="password",li.EMAIL_PASSWORD_SIGN_IN_METHOD="password",li.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ui{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class di extends ui{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fi extends di{constructor(){super("facebook.com")}static credential(e){return oi._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch(e){return null}}}fi.FACEBOOK_SIGN_IN_METHOD="facebook.com",fi.PROVIDER_ID="facebook.com";class pi extends di{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oi._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return pi.credential(t,n)}catch(e){return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com",pi.PROVIDER_ID="google.com";class gi extends di{constructor(){super("github.com")}static credential(e){return oi._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch(e){return null}}}gi.GITHUB_SIGN_IN_METHOD="github.com",gi.PROVIDER_ID="github.com";class mi extends di{constructor(){super("twitter.com")}static credential(e,t){return oi._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return mi.credential(t,n)}catch(e){return null}}}mi.TWITTER_SIGN_IN_METHOD="twitter.com",mi.PROVIDER_ID="twitter.com";class vi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const r=await Mn._fromIdTokenResponse(e,n,i),s=yi(n);return new vi({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=yi(n);return new vi({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function yi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class wi extends g{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,wi.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new wi(e,t,n,i)}}function bi(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw wi._fromErrorAndOperation(e,n,t,i);throw n}))}new WeakMap;const Ii="__sak";class _i{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ii,"1"),this.storage.removeItem(Ii),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ti extends _i{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=u();return Vn(e)||Gn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Jn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);!function(){const e=u();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||r===e.newValue||e.newValue===e.oldValue?i():setTimeout(i,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ti.type="LOCAL";const Ei=Ti;class ki extends _i{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ki.type="SESSION";const Si=ki;class Ai{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ai(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async e=>e(t.origin,r))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ci(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Ai.receivers=[];class Ri{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const h=Ci("",20);i.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===h)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Oi(){return window}function Ni(){return void 0!==Oi().WorkerGlobalScope&&"function"==typeof Oi().importScripts}const Di="firebaseLocalStorageDb",Pi=1,Li="firebaseLocalStorage",Mi="fbase_key";class Ui{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function xi(e,t){return e.transaction([Li],t?"readwrite":"readonly").objectStore(Li)}function ji(){const e=indexedDB.open(Di,Pi);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Li,{keyPath:Mi})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Li)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Di);return new Ui(e).toPromise()}(),t(await ji()))}))}))}async function Fi(e,t,n){const i=xi(e,!0).put({[Mi]:t,value:n});return new Ui(i).toPromise()}function Bi(e,t){const n=xi(e,!0).delete(t);return new Ui(n).toPromise()}class Hi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await ji()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ni()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ai._getInstance(Ni()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ri(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}var t}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ji();return await Fi(e,Ii,"1"),await Bi(e,Ii),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Fi(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=xi(e,!1).get(t),i=await new Ui(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Bi(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=xi(e,!1).getAll();return new Ui(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Hi.type="LOCAL";const Vi=Hi;function $i(e){return`__${e}${Math.floor(1e6*Math.random())}`}$i("rcb"),new pn(3e4,6e4);const zi="recaptcha";class Ki{constructor(e){this.providerId=Ki.PROVIDER_ID,this.auth=Zn(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var i;const r=await n.verify();try{let s;if(an("string"==typeof r,e,"argument-error"),an(n.type===zi,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){an("enroll"===t.type,e,"internal-error");const n=await function(e,t){return bn(e,"POST","/v2/accounts/mfaEnrollment:start",wn(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{an("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;an(n,e,"missing-multi-factor-info");const o=await function(e,t){return bn(e,"POST","/v2/accounts/mfaSignIn:start",wn(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return bn(e,"POST","/v1/accounts:sendVerificationCode",wn(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}(this.auth,e,O(t))}static credential(e,t){return hi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ki.credentialFromTaggedObject(t)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?hi._fromTokenResponse(t,n):null}}Ki.PROVIDER_ID="phone",Ki.PHONE_SIGN_IN_METHOD="phone";class qi extends ii{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return si(e,this._buildIdpRequest())}_linkToIdToken(e,t){return si(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return si(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Wi(e){return async function(e,t,n=!1){const i="signIn",r=await bi(e,i,t),s=await vi._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}(e.auth,new qi(e),e.bypassAuthState)}function Gi(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),async function(e,t,n=!1){const{auth:i}=e,r="reauthenticate";try{const s=await Rn(e,bi(i,r,t,e),n);an(s.idToken,i,"internal-error");const o=Cn(s.idToken);an(o,i,"internal-error");const{sub:a}=o;return an(e.uid===a,i,"user-mismatch"),vi._forOperation(e,r,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&rn(i,"user-mismatch"),e}}(n,new qi(e),e.bypassAuthState)}async function Ji(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),async function(e,t,n=!1){const i=await Rn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return vi._forOperation(e,"link",i)}(n,new qi(e),e.bypassAuthState)}class Xi{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wi;case"linkViaPopup":case"linkViaRedirect":return Ji;case"reauthViaPopup":case"reauthViaRedirect":return Gi;default:rn(this.auth,"internal-error")}}resolve(e){cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yi=new pn(2e3,1e4);class Qi extends Xi{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Qi.currentPopupAction&&Qi.currentPopupAction.cancel(),Qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return an(e,this.auth,"internal-error"),e}async onExecution(){cn(1===this.filter.length,"Popup operations only handle one event");const e=Ci();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(sn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(sn(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,Yi.get())};e()}}Qi.currentPopupAction=null;const Zi="pendingRedirect",er=new Map;class tr extends Xi{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=er.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return jn(Zi,e.config.apiKey,e.name)}(t),i=function(e){return un(e._redirectPersistence)}(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}er.set(this.auth._key(),e)}return this.bypassAuthState||er.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function nr(e,t){er.set(e._key(),t)}async function ir(e,t,n=!1){const i=Zn(e),r=function(e,t){return t?un(t):(an(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(i,t),s=new tr(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class rr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return or(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!or(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(sn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sr(e))}saveEventToCache(e){this.cachedEventUids.add(sr(e)),this.lastProcessedEventTime=Date.now()}}function sr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function or({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hr=/^https?/;function cr(e){const t=dn(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!hr.test(n))return!1;if(ar.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const lr=new pn(3e4,6e4);function ur(){const e=Oi().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let dr=null;function fr(e){return dr=dr||function(e){return new Promise(((t,n)=>{var i,r,s,o;function a(){ur(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ur(),n(sn(e,"network-request-failed"))},timeout:lr.get()})}if(null===(r=null===(i=Oi().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Oi().gapi)||void 0===s?void 0:s.load)){const t=$i("iframefcb");return Oi()[t]=()=>{gapi.load?a():n(sn(e,"network-request-failed"))},(o=`https://apis.google.com/js/api.js?onload=${t}`,new Promise(((e,t)=>{const n=document.createElement("script");var i,r;n.setAttribute("src",o),n.onload=e,n.onerror=e=>{const n=sn("internal-error");n.customData=e,t(n)},n.type="text/javascript",n.charset="UTF-8",(null!==(r=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==r?r:document).appendChild(n)}))).catch((e=>n(e)))}a()}})).catch((e=>{throw dr=null,e}))}(e),dr}const pr=new pn(5e3,15e3),gr="__/auth/iframe",mr="emulator/auth/iframe",vr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wr(e){const t=e.config;an(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?gn(t,mr):`https://${e.config.authDomain}/${gr}`,i={apiKey:t.apiKey,appName:e.name,v:be},r=yr.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${b(i).slice(1)}`}const br={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ir=500,_r=600,Tr="_blank",Er="http://localhost";class kr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const Sr="__/auth/handler",Ar="emulator/auth/handler";function Cr(e,t,n,i,r,s){an(e.config.authDomain,e,"auth-domain-config-required"),an(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:be,eventId:r};if(t instanceof ui){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof di){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){return e.emulator?gn(e,Ar):`https://${e.authDomain}/${Sr}`}(e)}?${b(a).slice(1)}`}const Rr="webStorageSupport",Or=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Si,this._completeRedirectFn=ir,this._overrideRedirectResult=nr}async _openPopup(e,t,n,i){var r;return cn(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=Ir,r=_r){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const h=Object.assign(Object.assign({},br),{width:i.toString(),height:r.toString(),top:s,left:o}),c=u().toLowerCase();n&&(a=$n(c)?Tr:n),Hn(c)&&(t=t||Er,h.scrollbars="yes");const l=Object.entries(h).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=u()){var t;return Gn(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new kr(null);const d=window.open(t||"",a,l);an(d,e,"popup-blocked");try{d.focus()}catch(e){}return new kr(d)}(e,Cr(e,t,n,dn(),i),Ci())}async _openRedirect(e,t,n,i){var r;return await this._originValidation(e),r=Cr(e,t,n,dn(),i),Oi().location.href=r,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(cn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await fr(e),n=Oi().gapi;return an(n,e,"internal-error"),t.open({where:document.body,url:wr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vr,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=sn(e,"network-request-failed"),s=Oi().setTimeout((()=>{i(r)}),pr.get());function o(){Oi().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{i(r)}))}))))}(e),n=new rr(e);return t.register("authEvent",(t=>(an(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rr,{type:Rr},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[Rr];void 0!==r&&t(!!r),rn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return bn(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(cr(e))return}catch(e){}rn(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Jn()||Vn()||Gn()}};var Nr="@firebase/auth",Dr="0.21.4";class Pr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){an(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Lr=c("authIdTokenMaxAge")||300;let Mr=null;var Ur;Ur="Browser",me(new N("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:r,authDomain:s}=n.options;return((e,n)=>{an(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),an(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const i={apiKey:r,authDomain:s,clientPlatform:Ur,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xn(Ur)},o=new Qn(e,n,i);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(un);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),me(new N("auth-internal",(e=>{return t=Zn(e.getProvider("auth").getImmediate()),new Pr(t);var t}),"PRIVATE").setInstantiationMode("EXPLICIT")),Te(Nr,Dr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ur)),Te(Nr,Dr,"esm2017");var xr,jr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e.g?e.g:"undefined"!=typeof self?self:{},Fr={},Br=Br||{},Hr=jr||self;function Vr(){}function $r(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function zr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Kr="closure_uid_"+(1e9*Math.random()>>>0),qr=0;function Wr(e,t,n){return e.call.apply(e.bind,arguments)}function Gr(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Jr(e,t,n){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Wr:Gr).apply(null,arguments)}function Xr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Yr(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function Qr(){this.s=this.s,this.o=this.o}Qr.prototype.s=!1,Qr.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Kr)&&e[Kr]||(e[Kr]=++qr))},Qr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Zr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function es(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function ts(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if($r(n)){const t=e.length||0,i=n.length||0;e.length=t+i;for(let r=0;r<i;r++)e[t+r]=n[r]}else e.push(n)}}function ns(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ns.prototype.h=function(){this.defaultPrevented=!0};var is=function(){if(!Hr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Hr.addEventListener("test",Vr,t),Hr.removeEventListener("test",Vr,t)}catch(e){}return e}();function rs(e){return/^[\s\xa0]*$/.test(e)}var ss=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function os(e,t){return e<t?-1:e>t?1:0}function as(){var e=Hr.navigator;return e&&(e=e.userAgent)?e:""}function hs(e){return-1!=as().indexOf(e)}function cs(e){return cs[" "](e),e}cs[" "]=Vr;var ls,us,ds=hs("Opera"),fs=hs("Trident")||hs("MSIE"),ps=hs("Edge"),gs=ps||fs,ms=hs("Gecko")&&!(-1!=as().toLowerCase().indexOf("webkit")&&!hs("Edge"))&&!(hs("Trident")||hs("MSIE"))&&!hs("Edge"),vs=-1!=as().toLowerCase().indexOf("webkit")&&!hs("Edge");function ys(){var e=Hr.document;return e?e.documentMode:void 0}e:{var ws="",bs=(us=as(),ms?/rv:([^\);]+)(\)|;)/.exec(us):ps?/Edge\/([\d\.]+)/.exec(us):fs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(us):vs?/WebKit\/(\S+)/.exec(us):ds?/(?:Version)[ \/]?(\S+)/.exec(us):void 0);if(bs&&(ws=bs?bs[1]:""),fs){var Is=ys();if(null!=Is&&Is>parseFloat(ws)){ls=String(Is);break e}}ls=ws}var _s,Ts={};function Es(){return function(e){var t=Ts;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let e=0;const t=ss(String(ls)).split("."),n=ss("9").split("."),i=Math.max(t.length,n.length);for(let o=0;0==e&&o<i;o++){var r=t[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;e=os(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||os(0==r[2].length,0==s[2].length)||os(r[2],s[2]),r=r[3],s=s[3]}while(0==e)}return 0<=e}()}()}Hr.document&&fs?_s=ys()||parseInt(ls,10)||void 0:_s=void 0;var ks=_s;function Ss(e,t){if(ns.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ms){e:{try{cs(t.nodeName);var r=!0;break e}catch(e){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:As[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ss.X.h.call(this)}}Yr(Ss,ns);var As={2:"touch",3:"pen",4:"mouse"};Ss.prototype.h=function(){Ss.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Cs="closure_listenable_"+(1e6*Math.random()|0),Rs=0;function Os(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ha=r,this.key=++Rs,this.ba=this.ea=!1}function Ns(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Ds(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function Ps(e){const t={};for(const n in e)t[n]=e[n];return t}const Ls="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ms(e,t){let n,i;for(let t=1;t<arguments.length;t++){for(n in i=arguments[t],i)e[n]=i[n];for(let t=0;t<Ls.length;t++)n=Ls[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function Us(e){this.src=e,this.g={},this.h=0}function xs(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=Zr(r,t);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Ns(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function js(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.ba&&s.listener==t&&s.capture==!!n&&s.ha==i)return r}return-1}Us.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=js(e,t,i,r);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Os(t,this.src,s,!!i,r)).ea=n,e.push(t)),t};var Fs="closure_lm_"+(1e6*Math.random()|0),Bs={};function Hs(e,t,n,i,r){if(i&&i.once)return $s(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Hs(e,t[s],n,i,r);return null}return n=Xs(n),e&&e[Cs]?e.N(t,n,zr(i)?!!i.capture:!!i,r):Vs(e,t,n,!1,i,r)}function Vs(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=zr(r)?!!r.capture:!!r,a=Gs(e);if(a||(e[Fs]=a=new Us(e)),(n=a.add(t,n,i,o,s)).proxy)return n;if(i=function(){const e=Ws;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)is||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(qs(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function $s(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)$s(e,t[s],n,i,r);return null}return n=Xs(n),e&&e[Cs]?e.O(t,n,zr(i)?!!i.capture:!!i,r):Vs(e,t,n,!0,i,r)}function zs(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)zs(e,t[s],n,i,r);else i=zr(i)?!!i.capture:!!i,n=Xs(n),e&&e[Cs]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=js(s=e.g[t],n,i,r))&&(Ns(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Gs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=js(t,n,i,r)),(n=-1<e?t[e]:null)&&Ks(n))}function Ks(e){if("number"!=typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Cs])xs(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(qs(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Gs(t))?(xs(n,e),0==n.h&&(n.src=null,t[Fs]=null)):Ns(e)}}}function qs(e){return e in Bs?Bs[e]:Bs[e]="on"+e}function Ws(e,t){if(e.ba)e=!0;else{t=new Ss(t,this);var n=e.listener,i=e.ha||e.src;e.ea&&Ks(e),e=n.call(i,t)}return e}function Gs(e){return(e=e[Fs])instanceof Us?e:null}var Js="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xs(e){return"function"==typeof e?e:(e[Js]||(e[Js]=function(t){return e.handleEvent(t)}),e[Js])}function Ys(){Qr.call(this),this.i=new Us(this),this.P=this,this.I=null}function Qs(e,t){var n,i=e.I;if(i)for(n=[];i;i=i.I)n.push(i);if(e=e.P,i=t.type||t,"string"==typeof t)t=new ns(t,e);else if(t instanceof ns)t.target=t.target||e;else{var r=t;Ms(t=new ns(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=Zs(o,i,!0,t)&&r}if(r=Zs(o=t.g=e,i,!0,t)&&r,r=Zs(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=Zs(o=t.g=n[s],i,!1,t)&&r}function Zs(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,h=o.ha||o.src;o.ea&&xs(e.i,o),r=!1!==a.call(h,i)&&r}}return r&&!i.defaultPrevented}Yr(Ys,Qr),Ys.prototype[Cs]=!0,Ys.prototype.removeEventListener=function(e,t,n,i){zs(this,e,t,n,i)},Ys.prototype.M=function(){if(Ys.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Ns(n[i]);delete t.g[e],t.h--}}this.I=null},Ys.prototype.N=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},Ys.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var eo=Hr.JSON.stringify;function to(){var e=ho;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var no,io=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new ro),(e=>e.reset()));class ro{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function so(e){Hr.setTimeout((()=>{throw e}),0)}function oo(e,t){no||function(){var e=Hr.Promise.resolve(void 0);no=function(){e.then(co)}}(),ao||(no(),ao=!0),ho.add(e,t)}var ao=!1,ho=new class{constructor(){this.h=this.g=null}add(e,t){const n=io.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function co(){for(var e;e=to();){try{e.h.call(e.g)}catch(e){so(e)}var t=io;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ao=!1}function lo(e,t){Ys.call(this),this.h=e||1,this.g=t||Hr,this.j=Jr(this.lb,this),this.l=Date.now()}function uo(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function fo(e,t,n){if("function"==typeof e)n&&(e=Jr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Jr(e.handleEvent,e)}return 2147483647<Number(t)?-1:Hr.setTimeout(e,t||0)}function po(e){e.g=fo((()=>{e.g=null,e.i&&(e.i=!1,po(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Yr(lo,Ys),(xr=lo.prototype).ca=!1,xr.R=null,xr.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Qs(this,"tick"),this.ca&&(uo(this),this.start()))}},xr.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},xr.M=function(){lo.X.M.call(this),uo(this),delete this.g};class go extends Qr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:po(this)}M(){super.M(),this.g&&(Hr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mo(e){Qr.call(this),this.h=e,this.g={}}Yr(mo,Qr);var vo=[];function yo(e,t,n,i){Array.isArray(n)||(n&&(vo[0]=n.toString()),n=vo);for(var r=0;r<n.length;r++){var s=Hs(t,n[r],i||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function wo(e){Ds(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ks(e)}),e),e.g={}}function bo(){this.g=!0}function Io(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return eo(n)}catch(e){return t}}(e,n)+(i?" "+i:"")}))}mo.prototype.M=function(){mo.X.M.call(this),wo(this)},mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bo.prototype.Aa=function(){this.g=!1},bo.prototype.info=function(){};var _o={},To=null;function Eo(){return To=To||new Ys}function ko(e){ns.call(this,_o.Pa,e)}function So(e){const t=Eo();Qs(t,new ko(t))}function Ao(e,t){ns.call(this,_o.STAT_EVENT,e),this.stat=t}function Co(e){const t=Eo();Qs(t,new Ao(t,e))}function Ro(e,t){ns.call(this,_o.Qa,e),this.size=t}function Oo(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Hr.setTimeout((function(){e()}),t)}_o.Pa="serverreachability",Yr(ko,ns),_o.STAT_EVENT="statevent",Yr(Ao,ns),_o.Qa="timingevent",Yr(Ro,ns);var No={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Do={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Po(){}function Lo(e){return e.h||(e.h=e.i())}function Mo(){}Po.prototype.h=null;var Uo,xo={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function jo(){ns.call(this,"d")}function Fo(){ns.call(this,"c")}function Bo(){}function Ho(e,t,n,i){this.l=e,this.j=t,this.m=n,this.U=i||1,this.S=new mo(this),this.O=$o,e=gs?125:void 0,this.T=new lo(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Vo}function Vo(){this.i=null,this.g="",this.h=!1}Yr(jo,ns),Yr(Fo,ns),Yr(Bo,Po),Bo.prototype.g=function(){return new XMLHttpRequest},Bo.prototype.i=function(){return{}},Uo=new Bo;var $o=45e3,zo={},Ko={};function qo(e,t,n){e.K=1,e.v=ua(oa(t)),e.s=n,e.P=!0,Wo(e,null)}function Wo(e,t){e.F=Date.now(),Yo(e),e.A=oa(e.v);var n=e.A,i=e.U;Array.isArray(i)||(i=[String(i)]),Ea(n.i,"t",i),e.C=0,n=e.l.H,e.h=new Vo,e.g=Th(e.l,n?t:null,!e.s),0<e.N&&(e.L=new go(Jr(e.La,e,e.g),e.N)),yo(e.S,e.g,"readystatechange",e.ib),t=e.H?Ps(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),So(),function(e,t,n,i,r,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),h=0;h<a.length;h++){var c=a[h].split("=");if(1<c.length){var l=c[0];c=c[1];var u=l.split("_");o=2<=u.length&&"type"==u[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Go(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Da}function Jo(e,t,n){let i,r=!0;for(;!e.I&&e.C<n.length;){if(i=Xo(e,n),i==Ko){4==t&&(e.o=4,Co(14),r=!1),Io(e.j,e.m,null,"[Incomplete Response]");break}if(i==zo){e.o=4,Co(15),Io(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}Io(e.j,e.m,i,null),na(e,i)}Go(e)&&i!=Ko&&i!=zo&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Co(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),gh(t),t.K=!0,Co(11))):(Io(e.j,e.m,n,"[Invalid Chunked Response]"),ta(e),ea(e))}function Xo(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?Ko:(n=Number(t.substring(n,i)),isNaN(n)?zo:(i+=1)+n>t.length?Ko:(t=t.substr(i,n),e.C=i+n,t))}function Yo(e){e.V=Date.now()+e.O,Qo(e,e.O)}function Qo(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Oo(Jr(e.gb,e),t)}function Zo(e){e.B&&(Hr.clearTimeout(e.B),e.B=null)}function ea(e){0==e.l.G||e.I||yh(e.l,e)}function ta(e){Zo(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,uo(e.T),wo(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function na(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Oa(n.h,e)))if(!e.J&&Oa(n.h,e)&&3==n.G){try{var i=n.Fa.g.parse(t)}catch(e){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vh(n),ah(n)}ph(n),Co(18)}}else n.Ba=r[1],0<n.Ba-n.T&&37500>r[2]&&n.L&&0==n.A&&!n.v&&(n.v=Oo(Jr(n.cb,n),6e3));if(1>=Ra(n.h)&&n.ja){try{n.ja()}catch(e){}n.ja=void 0}}else bh(n,11)}else if((e.J||n.g==e)&&vh(n),!rs(t))for(r=n.Fa.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.I=c[1],n.ka=c[2];const t=c[3];null!=t&&(n.ma=t,n.j.info("VER="+n.ma));const r=c[4];null!=r&&(n.Ca=r,n.j.info("SVER="+n.Ca));const l=c[5];null!=l&&"number"==typeof l&&0<l&&(i=1.5*l,n.J=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Na(s,s.h),s.h=null))}if(i.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.za=e,la(i.F,i.D,e))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var o=e;if((i=n).sa=_h(i,i.H?i.ka:null,i.V),o.J){Da(i.h,o);var a=o,h=i.J;h&&a.setTimeout(h),a.B&&(Zo(a),Yo(a)),i.g=o}else fh(i);0<n.i.length&&ch(n)}else"stop"!=c[0]&&"close"!=c[0]||bh(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?bh(n,7):oh(n):"noop"!=c[0]&&n.l&&n.l.wa(c),n.A=0)}So()}catch(e){}}function ia(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if($r(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if($r(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if($r(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],n&&n[s],e)}(xr=Ho.prototype).setTimeout=function(e){this.O=e},xr.ib=function(e){e=e.target;const t=this.L;t&&3==eh(e)?t.l():this.La(e)},xr.La=function(e){try{if(e==this.g)e:{const l=eh(this.g);var t=this.g.Ea();if(this.g.aa(),!(3>l)&&(3!=l||gs||this.g&&(this.h.h||this.g.fa()||th(this.g)))){this.I||4!=l||7==t||So(),Zo(this);var n=this.g.aa();this.Y=n;t:if(Go(this)){var i=th(this.g);e="";var r=i.length,s=4==eh(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ta(this),ea(this);var o="";break t}this.h.i=new Hr.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==n,function(e,t,n,i,r,s,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.U,l,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,h=this.g;if((a=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rs(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Co(12),ta(this),ea(this);break e}Io(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,na(this,n)}this.P?(Jo(this,l,o),gs&&this.i&&3==l&&(yo(this.S,this.T,"tick",this.hb),this.T.start())):(Io(this.j,this.m,o,null),na(this,o)),4==l&&ta(this),this.i&&!this.I&&(4==l?yh(this.l,this):(this.i=!1,Yo(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Co(12)):(this.o=0,Co(13)),ta(this),ea(this)}}}catch(e){}},xr.hb=function(){if(this.g){var e=eh(this.g),t=this.g.fa();this.C<t.length&&(Zo(this),Jo(this,e,t),this.i&&4!=e&&Yo(this))}},xr.cancel=function(){this.I=!0,ta(this)},xr.gb=function(){this.B=null;const e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(So(),Co(17)),ta(this),this.o=2,ea(this)):Qo(this,this.V-e)};var ra=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sa(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof sa){this.h=void 0!==t?t:e.h,aa(this,e.j),this.s=e.s,this.g=e.g,ha(this,e.m),this.l=e.l,t=e.i;var n=new ba;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ca(this,n),this.o=e.o}else e&&(n=String(e).match(ra))?(this.h=!!t,aa(this,n[1]||"",!0),this.s=da(n[2]||""),this.g=da(n[3]||"",!0),ha(this,n[4]),this.l=da(n[5]||"",!0),ca(this,n[6]||"",!0),this.o=da(n[7]||"")):(this.h=!!t,this.i=new ba(null,this.h))}function oa(e){return new sa(e)}function aa(e,t,n){e.j=n?da(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ha(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ca(e,t,n){t instanceof ba?(e.i=t,function(e,t){t&&!e.j&&(Ia(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(_a(this,t),Ea(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=fa(t,ya)),e.i=new ba(t,e.h))}function la(e,t,n){e.i.set(t,n)}function ua(e){return la(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function da(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function fa(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,pa),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pa(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}sa.prototype.toString=function(){var e=[],t=this.j;t&&e.push(fa(t,ga,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(fa(t,ga,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(fa(n,"/"==n.charAt(0)?va:ma,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",fa(n,wa)),e.join("")};var ga=/[#\/\?@]/g,ma=/[#\?:]/g,va=/[#\?]/g,ya=/[#\?@]/g,wa=/#/g;function ba(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ia(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function _a(e,t){Ia(e),t=ka(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ta(e,t){return Ia(e),t=ka(e,t),e.g.has(t)}function Ea(e,t,n){_a(e,t),0<n.length&&(e.i=null,e.g.set(ka(e,t),es(n)),e.h+=n.length)}function ka(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Sa(e){this.l=e||Aa,e=Hr.PerformanceNavigationTiming?0<(e=Hr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Hr.g&&Hr.g.Ga&&Hr.g.Ga()&&Hr.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(xr=ba.prototype).add=function(e,t){Ia(this),this.i=null,e=ka(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},xr.forEach=function(e,t){Ia(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},xr.oa=function(){Ia(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},xr.W=function(e){Ia(this);let t=[];if("string"==typeof e)Ta(this,e)&&(t=t.concat(this.g.get(ka(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},xr.set=function(e,t){return Ia(this),this.i=null,Ta(this,e=ka(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},xr.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},xr.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),o=this.W(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),e.push(r)}}return this.i=e.join("&")};var Aa=10;function Ca(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ra(e){return e.h?1:e.g?e.g.size:0}function Oa(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Na(e,t){e.g?e.g.add(t):e.h=t}function Da(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Pa(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return es(e.i)}function La(){}function Ma(){this.g=new La}function Ua(e,t,n){const i=n||"";try{ia(e,(function(e,n){let r=e;zr(e)&&(r=eo(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(e){throw t.push(i+"type="+encodeURIComponent("_badmap")),e}}function xa(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(e){}}function ja(e){this.l=e.ac||null,this.j=e.jb||!1}function Fa(e,t){Ys.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ba,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Sa.prototype.cancel=function(){if(this.i=Pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},La.prototype.stringify=function(e){return Hr.JSON.stringify(e,void 0)},La.prototype.parse=function(e){return Hr.JSON.parse(e,void 0)},Yr(ja,Po),ja.prototype.g=function(){return new Fa(this.l,this.j)},ja.prototype.i=function(e){return function(){return e}}({}),Yr(Fa,Ys);var Ba=0;function Ha(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Va(e){e.readyState=4,e.l=null,e.j=null,e.A=null,$a(e)}function $a(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(xr=Fa.prototype).open=function(e,t){if(this.readyState!=Ba)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,$a(this)},xr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Hr).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},xr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Va(this)),this.readyState=Ba},xr.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,$a(this)),this.g&&(this.readyState=3,$a(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Hr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ha(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},xr.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Va(this):$a(this),3==this.readyState&&Ha(this)}},xr.Va=function(e){this.g&&(this.response=this.responseText=e,Va(this))},xr.Ua=function(e){this.g&&(this.response=e,Va(this))},xr.ga=function(){this.g&&Va(this)},xr.setRequestHeader=function(e,t){this.v.append(e,t)},xr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},xr.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Fa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var za=Hr.JSON.parse;function Ka(e){Ys.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qa,this.K=this.L=!1}Yr(Ka,Ys);var qa="",Wa=/^https?$/i,Ga=["POST","PUT"];function Ja(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Xa(e),Qa(e)}function Xa(e){e.D||(e.D=!0,Qs(e,"complete"),Qs(e,"error"))}function Ya(e){if(e.h&&void 0!==Br&&(!e.C[1]||4!=eh(e)||2!=e.aa()))if(e.v&&4==eh(e))fo(e.Ha,0,e);else if(Qs(e,"readystatechange"),4==eh(e)){e.h=!1;try{const a=e.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===a){var r=String(e.H).match(ra)[1]||null;if(!r&&Hr.self&&Hr.self.location){var s=Hr.self.location.protocol;r=s.substr(0,s.length-1)}i=!Wa.test(r?r.toLowerCase():"")}n=i}if(n)Qs(e,"complete"),Qs(e,"success");else{e.m=6;try{var o=2<eh(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.aa()+"]",Xa(e)}}finally{Qa(e)}}}function Qa(e,t){if(e.g){Za(e);const n=e.g,i=e.C[0]?Vr:null;e.g=null,e.C=null,t||Qs(e,"ready");try{n.onreadystatechange=i}catch(e){}}}function Za(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Hr.clearTimeout(e.A),e.A=null)}function eh(e){return e.g?e.g.readyState:0}function th(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case qa:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function nh(e){let t="";return Ds(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ih(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=nh(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):la(e,t,n))}function rh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sh(e){this.Ca=0,this.i=[],this.j=new bo,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=rh("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=rh("baseRetryDelayMs",5e3,e),this.bb=rh("retryDelaySeedMs",1e4,e),this.$a=rh("forwardChannelMaxRetries",2,e),this.ta=rh("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Sa(e&&e.concurrentRequestLimit),this.Fa=new Ma,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function oh(e){if(hh(e),3==e.G){var t=e.U++,n=oa(e.F);la(n,"SID",e.I),la(n,"RID",t),la(n,"TYPE","terminate"),uh(e,n),(t=new Ho(e,e.j,t,void 0)).K=2,t.v=ua(oa(n)),n=!1,Hr.navigator&&Hr.navigator.sendBeacon&&(n=Hr.navigator.sendBeacon(t.v.toString(),"")),!n&&Hr.Image&&((new Image).src=t.v,n=!0),n||(t.g=Th(t.l,null),t.g.da(t.v)),t.F=Date.now(),Yo(t)}Ih(e)}function ah(e){e.g&&(gh(e),e.g.cancel(),e.g=null)}function hh(e){ah(e),e.u&&(Hr.clearTimeout(e.u),e.u=null),vh(e),e.h.cancel(),e.m&&("number"==typeof e.m&&Hr.clearTimeout(e.m),e.m=null)}function ch(e){Ca(e.h)||e.m||(e.m=!0,oo(e.Ja,e),e.C=0)}function lh(e,t){var n;n=t?t.m:e.U++;const i=oa(e.F);la(i,"SID",e.I),la(i,"RID",n),la(i,"AID",e.T),uh(e,i),e.o&&e.s&&ih(i,e.o,e.s),n=new Ho(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=dh(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Na(e.h,n),qo(n,i,t)}function uh(e,t){e.ia&&Ds(e.ia,(function(e,n){la(t,n,e)})),e.l&&ia({},(function(e,n){la(t,n,e)}))}function dh(e,t,n){n=Math.min(e.i.length,n);var i=e.l?Jr(e.l.Ra,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=r[o].h;const a=r[o].g;if(n-=t,0>n)t=Math.max(0,r[o].h-100),s=!1;else try{Ua(a,e,"req"+n+"_")}catch(e){i&&i(a)}}if(s){i=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,i}function fh(e){e.g||e.u||(e.Z=1,oo(e.Ia,e),e.A=0)}function ph(e){return!(e.g||e.u||3<=e.A||(e.Z++,e.u=Oo(Jr(e.Ia,e),wh(e,e.A)),e.A++,0))}function gh(e){null!=e.B&&(Hr.clearTimeout(e.B),e.B=null)}function mh(e){e.g=new Ho(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=oa(e.sa);la(t,"RID","rpc"),la(t,"SID",e.I),la(t,"CI",e.L?"0":"1"),la(t,"AID",e.T),la(t,"TYPE","xmlhttp"),uh(e,t),e.o&&e.s&&ih(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=ua(oa(t)),n.s=null,n.P=!0,Wo(n,e)}function vh(e){null!=e.v&&(Hr.clearTimeout(e.v),e.v=null)}function yh(e,t){var n=null;if(e.g==t){vh(e),gh(e),e.g=null;var i=2}else{if(!Oa(e.h,t))return;n=t.D,Da(e.h,t),i=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.F;var r=e.C;Qs(i=Eo(),new Ro(i,n)),ch(e)}else fh(e);else if(3==(r=t.o)||0==r&&0<e.pa||!(1==i&&function(e,t){return!(Ra(e.h)>=e.h.j-(e.m?1:0)||(e.m?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.C>=(e.Za?0:e.$a)||(e.m=Oo(Jr(e.Ja,e,t),wh(e,e.C)),e.C++,0)))}(e,t)||2==i&&ph(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:bh(e,5);break;case 4:bh(e,10);break;case 3:bh(e,6);break;default:bh(e,2)}}function wh(e,t){let n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function bh(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var i=Jr(e.kb,e);n||(n=new sa("//www.google.com/images/cleardot.gif"),Hr.location&&"http"==Hr.location.protocol||aa(n,"https"),ua(n)),function(e,t){const n=new bo;if(Hr.Image){const i=new Image;i.onload=Xr(xa,n,i,"TestLoadImage: loaded",!0,t),i.onerror=Xr(xa,n,i,"TestLoadImage: error",!1,t),i.onabort=Xr(xa,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=Xr(xa,n,i,"TestLoadImage: timeout",!1,t),Hr.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else Co(2);e.G=0,e.l&&e.l.va(t),Ih(e),hh(e)}function Ih(e){if(e.G=0,e.la=[],e.l){const t=Pa(e.h);0==t.length&&0==e.i.length||(ts(e.la,t),ts(e.la,e.i),e.h.i.length=0,es(e.i),e.i.length=0),e.l.ua()}}function _h(e,t,n){var i=n instanceof sa?oa(n):new sa(n,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),ha(i,i.m);else{var r=Hr.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new sa(null,void 0);i&&aa(s,i),t&&(s.g=t),r&&ha(s,r),n&&(s.l=n),i=s}return n=e.D,t=e.za,n&&t&&la(i,n,t),la(i,"VER",e.ma),uh(e,i),i}function Th(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Ka(new ja({jb:!0})):new Ka(e.ra)).Ka(e.H),t}function Eh(){}function kh(){if(fs&&!(10<=Number(ks)))throw Error("Environmental error: no available transport.")}function Sh(e,t){Ys.call(this),this.g=new sh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!rs(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!rs(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Rh(this)}function Ah(e){jo.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ch(){Fo.call(this),this.status=1}function Rh(e){this.g=e}(xr=Ka.prototype).Ka=function(e){this.L=e},xr.da=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Uo.g(),this.C=this.u?Lo(this.u):Lo(Uo),this.g.onreadystatechange=Jr(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void Ja(this,e)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),r=Hr.FormData&&e instanceof Hr.FormData,!(0<=Zr(Ga,t))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Za(this),0<this.B&&((this.K=function(e){return fs&&Es()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jr(this.qa,this)):this.A=fo(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){Ja(this,e)}},xr.qa=function(){void 0!==Br&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qs(this,"timeout"),this.abort(8))},xr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Qs(this,"complete"),Qs(this,"abort"),Qa(this))},xr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qa(this,!0)),Ka.X.M.call(this)},xr.Ha=function(){this.s||(this.F||this.v||this.l?Ya(this):this.fb())},xr.fb=function(){Ya(this)},xr.aa=function(){try{return 2<eh(this)?this.g.status:-1}catch(e){return-1}},xr.fa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},xr.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),za(t)}},xr.Ea=function(){return this.m},xr.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(xr=sh.prototype).ma=8,xr.G=1,xr.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const r=new Ho(this,this.j,e,void 0);let s=this.s;if(this.S&&(s?(s=Ps(s),Ms(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)e:{for(var t=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=dh(this,r,t),la(n=oa(this.F),"RID",e),la(n,"CVER",22),this.D&&la(n,"X-HTTP-Session-Id",this.D),uh(this,n),s&&(this.N?t="headers="+encodeURIComponent(String(nh(s)))+"&"+t:this.o&&ih(n,this.o,s)),Na(this.h,r),this.Ya&&la(n,"TYPE","init"),this.O?(la(n,"$req",t),la(n,"SID","null"),r.Z=!0,qo(r,n,null)):qo(r,n,t),this.G=2}}else 3==this.G&&(e?lh(this,e):0==this.i.length||Ca(this.h)||lh(this))},xr.Ia=function(){if(this.u=null,mh(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Oo(Jr(this.eb,this),e)}},xr.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Co(10),ah(this),mh(this))},xr.cb=function(){null!=this.v&&(this.v=null,ah(this),ph(this),Co(19))},xr.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Co(2)):(this.j.info("Failed to ping google.com"),Co(1))},(xr=Eh.prototype).xa=function(){},xr.wa=function(){},xr.va=function(){},xr.ua=function(){},xr.Ra=function(){},kh.prototype.g=function(e,t){return new Sh(e,t)},Yr(Sh,Ys),Sh.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Co(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=_h(e,null,e.V),ch(e)},Sh.prototype.close=function(){oh(this.g)},Sh.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=eo(e),e=n);t.i.push(new class{constructor(e,t){this.h=e,this.g=t}}(t.ab++,e)),3==t.G&&ch(t)},Sh.prototype.M=function(){this.g.l=null,delete this.j,oh(this.g),delete this.g,Sh.X.M.call(this)},Yr(Ah,jo),Yr(Ch,Fo),Yr(Rh,Eh),Rh.prototype.xa=function(){Qs(this.g,"a")},Rh.prototype.wa=function(e){Qs(this.g,new Ah(e))},Rh.prototype.va=function(e){Qs(this.g,new Ch)},Rh.prototype.ua=function(){Qs(this.g,"b")},kh.prototype.createWebChannel=kh.prototype.g,Sh.prototype.send=Sh.prototype.u,Sh.prototype.open=Sh.prototype.m,Sh.prototype.close=Sh.prototype.close,No.NO_ERROR=0,No.TIMEOUT=8,No.HTTP_ERROR=6,Do.COMPLETE="complete",Mo.EventType=xo,xo.OPEN="a",xo.CLOSE="b",xo.ERROR="c",xo.MESSAGE="d",Ys.prototype.listen=Ys.prototype.N,Ka.prototype.listenOnce=Ka.prototype.O,Ka.prototype.getLastError=Ka.prototype.Oa,Ka.prototype.getLastErrorCode=Ka.prototype.Ea,Ka.prototype.getStatus=Ka.prototype.aa,Ka.prototype.getResponseJson=Ka.prototype.Sa,Ka.prototype.getResponseText=Ka.prototype.fa,Ka.prototype.send=Ka.prototype.da,Ka.prototype.setWithCredentials=Ka.prototype.Ka,Fr.createWebChannelTransport=function(){return new kh},Fr.getStatEventTarget=function(){return Eo()},Fr.ErrorCode=No,Fr.EventType=Do,Fr.Event=_o,Fr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Fr.FetchXmlHttpFactory=ja,Fr.WebChannel=Mo,Fr.XhrIo=Ka;const Oh="@firebase/firestore";class Nh{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nh.UNAUTHENTICATED=new Nh(null),Nh.GOOGLE_CREDENTIALS=new Nh("google-credentials-uid"),Nh.FIRST_PARTY=new Nh("first-party-uid"),Nh.MOCK_USER=new Nh("mock-user");let Dh="9.17.2";const Ph=new V("@firebase/firestore");function Lh(e,...t){if(Ph.logLevel<=U.DEBUG){const n=t.map(Uh);Ph.debug(`Firestore (${Dh}): ${e}`,...n)}}function Mh(e,...t){if(Ph.logLevel<=U.ERROR){const n=t.map(Uh);Ph.error(`Firestore (${Dh}): ${e}`,...n)}}function Uh(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function xh(e="Unexpected state"){const t=`FIRESTORE (${Dh}) INTERNAL ASSERTION FAILED: `+e;throw Mh(t),new Error(t)}function jh(e,t){e||xh()}const Fh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bh extends g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hh{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $h{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Nh.UNAUTHENTICATED)))}shutdown(){}}class zh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Kh{constructor(e){this.t=e,this.currentUser=Nh.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Hh;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Hh,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{Lh("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Lh("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Hh)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Lh("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(jh("string"==typeof t.accessToken),new Vh(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return jh(null===e||"string"==typeof e),new Nh(e)}}class qh{constructor(e,t,n,i){this.h=e,this.l=t,this.m=n,this.g=i,this.type="FirstParty",this.user=Nh.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(jh(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Wh{constructor(e,t,n,i){this.h=e,this.l=t,this.m=n,this.g=i}getToken(){return Promise.resolve(new qh(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable((()=>t(Nh.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jh{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const n=e=>{null!=e.error&&Lh("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.A;return this.A=e.token,Lh("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{Lh("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.T.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.T.getImmediate({optional:!0});e?i(e):Lh("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(jh("string"==typeof e.token),this.A=e.token,new Gh(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Xh(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class Yh{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=Xh(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%e.length))}return n}}function Qh(e,t){return e<t?-1:e>t?1:0}class Zh{constructor(e,t,n){void 0===t?t=0:t>e.length&&xh(),void 0===n?n=e.length-t:n>e.length-t&&xh(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Zh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zh?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ec extends Zh{construct(e,t,n){return new ec(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Bh(Fh.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new ec(t)}static emptyPath(){return new ec([])}}class tc{constructor(e){this.path=e}static fromPath(e){return new tc(ec.fromString(e))}static fromName(e){return new tc(ec.fromString(e).popFirst(5))}static empty(){return new tc(ec.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ec.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ec.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tc(new ec(e.slice()))}}function nc(e){return"IndexedDbTransactionError"===e.name}class ic{constructor(e,t,n,i,r,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class rc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof rc&&e.projectId===this.projectId&&e.database===this.database}}class sc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class oc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw e instanceof DOMException?new sc("Invalid base64 string: "+e):e}}(e);return new oc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new oc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qh(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function ac(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}oc.EMPTY_BYTE_STRING=new oc("");class hc{constructor(e,t){this.comparator=e,this.root=t||lc.EMPTY}insert(e,t){return new hc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,lc.BLACK,null,null))}remove(e){return new hc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cc(this.root,e,this.comparator,!0)}}class cc{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lc{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:lc.RED,this.left=null!=i?i:lc.EMPTY,this.right=null!=r?r:lc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new lc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return lc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return lc.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xh();if(this.right.isRed())throw xh();const e=this.left.check();if(e!==this.right.check())throw xh();return e+(this.isRed()?0:1)}}lc.EMPTY=null,lc.RED=!0,lc.BLACK=!1,lc.EMPTY=new class{constructor(){this.size=0}get key(){throw xh()}get value(){throw xh()}get color(){throw xh()}get left(){throw xh()}get right(){throw xh()}copy(e,t,n,i,r){return this}insert(e,t,n){return new lc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class uc{constructor(e){this.comparator=e,this.data=new hc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dc(this.data.getIterator())}getIteratorFrom(e){return new dc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof uc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new uc(this.comparator);return t.data=e,t}}class dc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}var fc,pc;(pc=fc||(fc={}))[pc.OK=0]="OK",pc[pc.CANCELLED=1]="CANCELLED",pc[pc.UNKNOWN=2]="UNKNOWN",pc[pc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pc[pc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pc[pc.NOT_FOUND=5]="NOT_FOUND",pc[pc.ALREADY_EXISTS=6]="ALREADY_EXISTS",pc[pc.PERMISSION_DENIED=7]="PERMISSION_DENIED",pc[pc.UNAUTHENTICATED=16]="UNAUTHENTICATED",pc[pc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pc[pc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pc[pc.ABORTED=10]="ABORTED",pc[pc.OUT_OF_RANGE=11]="OUT_OF_RANGE",pc[pc.UNIMPLEMENTED=12]="UNIMPLEMENTED",pc[pc.INTERNAL=13]="INTERNAL",pc[pc.UNAVAILABLE=14]="UNAVAILABLE",pc[pc.DATA_LOSS=15]="DATA_LOSS",new hc(tc.comparator),new hc(tc.comparator),new hc(tc.comparator),new uc(tc.comparator),new uc(Qh);class gc{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(ac(e.integerValue));else if("doubleValue"in e){const n=ac(e.doubleValue);isNaN(n)?this.fe(t,13):(this.fe(t,15),function(e){return 0===e&&1/e==-1/0}(n)?t.de(0):t.de(n))}else if("timestampValue"in e){const n=e.timestampValue;this.fe(t,20),"string"==typeof n?t._e(n):(t._e(`${n.seconds||""}`),t.de(n.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(function(e){return"string"==typeof e?oc.fromBase64String(e):oc.fromUint8Array(e)}(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.fe(t,45),t.de(n.latitude||0),t.de(n.longitude||0)}else"mapValue"in e?function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):xh()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const n=e.fields||{};this.fe(t,55);for(const e of Object.keys(n))this.we(e,t),this.he(n[e],t)}Ie(e,t){const n=e.values||[];this.fe(t,50);for(const e of n)this.he(e,t)}ye(e,t){this.fe(t,37),tc.fromName(e).path.forEach((e=>{this.fe(t,60),this.Te(e,t)}))}fe(e,t){e.de(t)}me(e){e.de(2)}}gc.Ee=new gc,new Uint8Array(0);class mc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new mc(e,mc.DEFAULT_COLLECTION_PERCENTILE,mc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vc(){return"undefined"!=typeof document?document:null}mc.DEFAULT_COLLECTION_PERCENTILE=10,mc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mc.DEFAULT=new mc(41943040,mc.DEFAULT_COLLECTION_PERCENTILE,mc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mc.DISABLED=new mc(-1,0,0);class yc{constructor(e,t,n=1e3,i=1.5,r=6e4){this.Ys=e,this.timerId=t,this.po=n,this.Io=i,this.To=r,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.Po()),n=Math.max(0,Date.now()-this.Ro),i=Math.max(0,t-n);i>0&&Lh("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,(()=>(this.Ro=Date.now(),e()))),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}class wc{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Hh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new wc(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bh(Fh.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class bc{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Nh.UNAUTHENTICATED,this.clientId=Yh.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Lh("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Lh("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Bh(Fh.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=function(e,t){if(Mh("AsyncQueue",`${t}: ${e}`),nc(e))return new Bh(Fh.UNAVAILABLE,`${t}: ${e}`);throw e}(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}const Ic=new Map;function _c(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Bh(Fh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=function(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":xh()}(e);throw new Bh(Fh.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Tc{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Bh(Fh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Bh(Fh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,i){if(!0===t&&!0===i)throw new Bh(Fh.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ec{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Bh(Fh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Bh(Fh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $h;switch(e.type){case"gapi":const t=e.client;return new Wh(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Bh(Fh.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ic.get(e);t&&(Lh("ComponentProvider","Removing Datastore"),Ic.delete(e),t.terminate())}(this),Promise.resolve()}}function kc(e,t,n,i={}){var s;const o=(e=_c(e,Ec))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&function(e,...t){if(Ph.logLevel<=U.WARN){const n=t.map(Uh);Ph.warn(`Firestore (${Dh}): ${e}`,...n)}}("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:`${t}:${n}`,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=Nh.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[r(JSON.stringify({alg:"none",type:"JWT"})),r(JSON.stringify(o)),""].join(".")}(i.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const o=i.mockUserToken.sub||i.mockUserToken.user_id;if(!o)throw new Bh(Fh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Nh(o)}e._authCredentials=new zh(new Vh(t,n))}}class Sc{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new yc(this,"async_queue_retry"),this.Hc=()=>{const e=vc();e&&Lh("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ko.Vo()};const e=vc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=vc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise((()=>{}));const t=new Hh;return this.Yc((()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Uc.push(e),this.Zc())))}async Zc(){if(0!==this.Uc.length){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(e){if(!nc(e))throw e;Lh("AsyncQueue","Operation failed with retryable error: "+e)}this.Uc.length>0&&this.ko.vo((()=>this.Zc()))}}Yc(e){const t=this.qc.then((()=>(this.jc=!0,e().catch((e=>{this.Qc=e,this.jc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Mh("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.jc=!1,e))))));return this.qc=t,t}enqueueAfterDelay(e,t,n){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const i=wc.createAndSchedule(this,e,t,n,(e=>this.Xc(e)));return this.Gc.push(i),i}Jc(){this.Qc&&xh()}verifyOperationInProgress(){}async ta(){let e;do{e=this.qc,await e}while(e!==this.qc)}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then((()=>{this.Gc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()}))}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}class Ac extends Ec{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Sc,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||function(e){var t;const n=e._freezeSettings(),i=function(e,t,n,i){return new ic(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new bc(e._authCredentials,e._appCheckCredentials,e._queue,i)}(this),this._firestoreClient.terminate()}}!function(e,t=!0){!function(e){Dh=e}(be),me(new N("firestore",((e,{instanceIdentifier:n,options:i})=>{const r=e.getProvider("app").getImmediate(),s=new Ac(new Kh(e.getProvider("auth-internal")),new Jh(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Bh(Fh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rc(e.options.projectId,t)}(r,n),r);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Te(Oh,"3.8.4",e),Te(Oh,"3.8.4","esm2017")}(),function(e=_e()){const t=ve(e=O(e),_t);t.isInitialized()?t.getImmediate():function(e,t={}){const n=ve(e,_t);if(n.isInitialized()){const e=n.getImmediate();if(y(t,n.getOptions()))return e;throw Ot.create("already-initialized")}n.initialize({options:t})}(e)}(Ie({apiKey:"AIzaSyA5BJMCIAI6hoXY3hD3k-QW_NnuX5GV5Es",authDomain:"firstproject-68c11.firebaseapp.com",projectId:"firstproject-68c11",storageBucket:"firstproject-68c11.appspot.com",messagingSenderId:"649357505390",appId:"1:649357505390:web:7e4f5d2e10c35603c0877f",measurementId:"G-FH35KRD446"})),function(e=_e()){const t=ve(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ve(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(y(n.getOptions(),null!=t?t:{}))return e;rn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Or,persistence:[Vi,Ei,Si]}),i=c("authTokenSyncURL");if(i){const e=(r=i,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Lr)return;const i=null==t?void 0:t.token;Mr!==i&&(Mr=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(e,t,n){O(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(t,n,i,r){O(t).onIdTokenChanged((t=>e(t)),void 0,void 0)}(n)}var r;const s=a("auth");s&&function(e,t,n){const i=Zn(e);an(i._canInitEmulator,i,"emulator-config-failed"),an(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=ti(t),{host:o,port:a}=function(e){const t=ti(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:ni(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:ni(t)}}}(t),h=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${h}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${s}`)}(firebaseApp),function(e,t){const n="string"==typeof e?e:"(default)",i=ve("object"==typeof e?e:_e(),"firestore").getImmediate({identifier:n});if(!i._initialized){const e=(e=>{const t=a(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]})("firestore");e&&kc(i,...e)}}(firebaseApp)})();